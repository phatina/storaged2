<!DOCTYPE node PUBLIC
"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">
<node name="/" xmlns:doc="http://www.freedesktop.org/dbus/1.0/doc.dtd">

<!--
 Copyright (C) 2015 Peter Hatina <phatina@redhat.com>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2 of the License, or (at your option) any later version.

 This library is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General
 Public License along with this library; if not, write to the
 Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 Boston, MA 02111-1307, USA.
-->

  <!-- ********************************************************************** -->

  <!--
      org.storaged.Storaged.Manager.BTRFS:
      @short_description: BTRFS add-on to the manager singleton
      @since: 2.1.3

      Additional interface with BTRFS specifics for top-level manager
      singleton object located at the object path
      <literal>/org/storaged/Storaged/Manager</literal>.
  -->
  <interface name="org.storaged.Storaged.Manager.BTRFS">
    <!-- prereq: org.storaged.Storaged.Manager -->

    <!--
        CreateVolume:
        @devices: A list of devices to create BTRFS volume from.
        @label: The label for the new volume.
        @data_level: The RAID level for the new volume.
        @md_level: The RAID level for metadata.
        @options: Additional options.
        @since 2.3.0

        Creates a new volume from @devices.

        No additional options are currently defined.
    -->
    <method name="CreateVolume">
      <arg name="devices" type="as" direction="in"/>
      <arg name="label" type="s" direction="in"/>
      <arg name="data_level" type="s" direction="in"/>
      <arg name="md_level" type="s" direction="in"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

  </interface>

  <!-- ********************************************************************** -->

  <!--
      org.storaged.Storaged.Filesystem.BTRFS:
      @short_description: BTRFS filesystem interface exported on block objects

      This interface is used for #org.storaged.Storaged.Block devices that
      has been filtered through BTRFS plugin.
  -->
  <interface name="org.storaged.Storaged.Filesystem.BTRFS">
    <!-- prereq: org.storaged.Storaged.Filesystem -->

    <!--
        AddDevice:
        @device: A device to be added to BTRFS volume.
        @options: Additional options.
        @since: 2.3.0

        Adds the @device to the volume.

        No additional options are currently defined.
    -->
    <method name="AddDevice">
      <arg name="device" type="s" direction="in"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <!--
        RemoveDevice:
        @device: A device to be removed from BTRFS volume.
        @options: Additional options.
        @since: 2.3.0

        Removes the @device from the volume.

        No additional options are currently defined.
    -->
    <method name="RemoveDevice">
      <arg name="device" type="s" direction="in"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <!--
        CreateSubvolume:
        @name: Name of a new subvolume.
        @options: Additional options.
        @since 2.1.3

        Creates a new subvolume.

        No additional options are currently defined.
    -->
    <method name="CreateSubvolume">
      <arg name="name" direction="in" type="s"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <!--
        RemoveSubvolume:
        @name: Name of the subvolume to be deleted.
        @options: Additional options.
        @since 2.1.3

        Deletes a subvolume.

        No additional options are currently defined.
    -->
    <method name="RemoveSubvolume">
      <arg name="name" direction="in" type="s"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <!--
        GetSubvolumes:
        @snapshots_only: True if to list only snapshot subvolumes; False otherwise.
        @subvolumes: Structure containing subvolume id, parent_id and path.
        @subvolumes_cnt: The number of returned elements.
        @options: Additional options.
        @since: 2.1.3

        Returns a list of subvolumes.

        No additional options are currently defined.
    -->
    <method name="GetSubvolumes">
      <arg name="snapshots_only" direction="in" type="b"/>
      <arg name="subvolumes" direction="out" type="a(tts)"/>
      <arg name="subvolumes_cnt" direction="out" type="i"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <!--
        CreateSnapshot:
        @source: A path to source subvolume.
        @dest: A path to new snapshot volume.
        @ro: True if the snapshot should be read-only; False otherwise.
        @options: Additional options.
        @since: 2.1.3

        Creates a snapshot.

        No additional options are currently defined.
    -->
    <method name="CreateSnapshot">
      <arg name="source" direction="in" type="s"/>
      <arg name="dest" direction="in" type="s"/>
      <arg name="ro" direction="in" type="b"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <!--
        Repair:
        @options: Additional options.
        @since: 2.3.0

        Checks and repairs btrfs volume.

        No additional options are currently defined.
    -->
    <method name="Repair">
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <!--
        Resize:
        @size: Requested new size in Bytes.
        @options: Additional options.
        @since: 2.3.0

        Resizes the volume.

        No additional options are currently defined.
    -->
    <method name="Resize">
      <arg name="size" type="t" direction="in"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <!--
        SetLabel:
        @label: New label.
        @options: Additional options.
        @since 2.1.3

        Sets a new label for the given volume.

        No additional options are currently defined.
    -->
    <method name="SetLabel">
      <arg name="label" direction="in" type="s"/>
      <arg name="options" type="a{sv}" direction="in"/>
    </method>

    <property name="label" type="s" access="read"/>
    <property name="uuid" type="s" access="read"/>
    <property name="num_devices" type="t" access="read"/>
    <property name="used" type="t" access="read"/>
  </interface>
</node>
